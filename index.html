<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>中学１年期末クイズ（家庭科）</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 30px;
      background: #f5f5f5;
    }
    .question-box, .result-box {
      margin-bottom: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
    }
    table {
      margin: 20px auto;
      border-collapse: collapse;
    }
    td, th {
      border: 1px solid #ccc;
      padding: 8px;
    }
    #question {
      font-size: 1.8em;
      font-weight: bold;
      line-height: 1.6;
      background-color: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    #choices button {
      display: block;
      width: 60%;
      margin: 10px auto;
    }
  </style>
</head>
<body>

  <h1>中学１年期末クイズ（家庭科）</h1>

  <div class="question-box">
    <div id="question">問題を読み込み中...</div>
    <div id="choices"></div>
  </div>

  <div class="result-box" id="resultBox" style="display: none;">
    <h2>クイズ終了！</h2>
    <p id="scoreText"></p>
    <p id="commentText" style="font-weight: bold; font-size: 1.2em;"></p>
    <h3>解答一覧</h3>
    <table id="resultTable">
      <tr><th>問題</th><th>正解</th><th>あなたの答え</th><th>結果</th></tr>
    </table>
    <button onclick="restartQuiz()">最初に戻る</button>
  </div>

  <script>
    const quizData = [
      {
        question: "インドの民族衣装で布を体に巻き付けるものは？",
        answer: "サリー",
        choices: ["キルト", "サリー", "ポンチョ"]
      },
      {
        question: "チリやメキシコで布の一部に穴をあけて頭からかぶる民族衣装は？",
        answer: "ポンチョ",
        choices: ["バティック", "着物", "ポンチョ"]
      },
      {
        question: "インドネシアの腰布型民族衣装の一つは？",
        answer: "バティック",
        choices: ["バティック", "アットゥシ", "紅型"]
      },
      {
        question: "京都に伝わる織物は何という名前？",
        answer: "西陣織",
        choices: ["加賀友禅", "結城紬", "西陣織"]
      },
      {
        question: "「夫婦と子どもだけで構成される家庭」は何という？",
        answer: "核家族",
        choices: ["三世代家族", "核家族", "拡大家族"]
      }
    ];

    let current = 0;
    let score = 0;
    let results = [];
    let shuffledQuiz = [];

    function shuffleArray(array) {
      const copy = [...array];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function loadQuestion() {
      const currentQuiz = shuffledQuiz[current];
      document.getElementById('question').textContent = currentQuiz.question;

      const choicesBox = document.getElementById('choices');
      choicesBox.innerHTML = '';

      currentQuiz.choices.forEach(choice => {
        const button = document.createElement('button');
        button.textContent = choice;
        button.onclick = () => handleAnswer(choice);
        choicesBox.appendChild(button);
      });
    }

    function handleAnswer(selected) {
      const currentQuiz = shuffledQuiz[current];
      const isCorrect = selected === currentQuiz.answer;
      if (isCorrect) score++;

      results.push({
        question: currentQuiz.question,
        answer: currentQuiz.answer,
        selected: selected,
        correct: isCorrect
      });

      current++;
      if (current < shuffledQuiz.length) {
        loadQuestion();
      } else {
        showResult();
      }
    }

    function getJojoComment(scorePercent) {
      if (scorePercent < 50)
        return '<span style="color:red;font-weight:bold;">「オレにはわかる……この点数……<strong>キサマは“平部員に決定ッ！！”</strong>だァァァ！」</span>';
      if (scorePercent < 60)
        return '<span style="color:orange;font-weight:bold;">「このままだと……<strong>“平部員になってしまうかも……”</strong>という運命に抗えないぞッ！」</span>';
      if (scorePercent < 70)
        return '<span style="color:gold;font-weight:bold;">「クッ……惜しいッ！その点数……<strong>“副部長までもう少しッ！”</strong>だとォォ！？」</span>';
      if (scorePercent < 80)
        return '<span style="color:green;font-weight:bold;">「ムウゥ……見えてきたな……<strong>“もうすぐ副部長！？”</strong>ってヤツがよォ！！」</span>';
      if (scorePercent < 90)
        return '<span style="color:blue;font-weight:bold;">「やるじゃあねぇか……キサマこそが<strong>“副部長に相応しい男ッ！”</strong>だッ！！」</span>';
      return '<span style="color:purple;font-weight:bold;">「フハハハハッ！見たかァァ！！<strong>“貴様こそ、真の部長ッ！！”</strong>ってワケだッ！！」</span>';
    }

    function showResult() {
      const percent = (score / shuffledQuiz.length) * 100;
      document.getElementById('scoreText').textContent = `あなたの得点は ${score * 10} 点です！（${score} / ${shuffledQuiz.length}問）`;
      document.getElementById('commentText').innerHTML = getJojoComment(percent);

      const table = document.getElementById('resultTable');
      table.innerHTML = '<tr><th>問題</th><th>正解</th><th>あなたの答え</th><th>結果</th></tr>';
      results.forEach(result => {
        const row = table.insertRow();
        row.insertCell(0).textContent = result.question;
        row.insertCell(1).textContent = result.answer;
        row.insertCell(2).textContent = result.selected;
        const resultCell = row.insertCell(3);
        resultCell.textContent = result.correct ? "正解" : "不正解";
        resultCell.style.color = result.correct ? "green" : "red";
      });

      document.querySelector('.question-box').style.display = 'none';
      document.getElementById('resultBox').style.display = 'block';
    }

    function restartQuiz() {
      score = 0;
      current = 0;
      results = [];
      shuffledQuiz = shuffleArray(quizData).slice(0, 5); // 表示する問題数をここで調整
      document.querySelector('.question-box').style.display = 'block';
      document.getElementById('resultBox').style.display = 'none';
      loadQuestion();
    }

    // 初期化
    shuffledQuiz = shuffleArray(quizData).slice(0, 5);
    loadQuestion();
  </script>

</body>
</html>
